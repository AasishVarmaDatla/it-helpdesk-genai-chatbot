<!DOCTYPE html>
<html>
<head>
    <title>IT Helpdesk Chatbot</title>
    <style>
        body {
            background:#0f172a;
            font-family:Arial;
            display:flex;
            justify-content:center;
            align-items:center;
            height:100vh;
        }



        .chatbox {
            width:400px;
            height:500px;
            background:#1e293b;
            border-radius:12px;
            display:flex;
            flex-direction:column;
            overflow:hidden;
        }

        .header {
            background:#3b82f6;
            color:white;
            padding:15px;
            text-align:center;
            font-weight:bold;
        }

        .messages {
            flex:1;
            padding:15px;
            overflow:auto;
            color:white;
        }

        .input-box {
            display:flex;
            padding:10px;
            background:#111827;
        }

        input {
            flex:1;
            padding:10px;
            border:none;
            border-radius:6px;
        }

        button {
            margin-left:10px;
            padding:10px 20px;
            background:#22c55e;
            border:none;
            color:white;
            border-radius:6px;
            cursor:pointer;
        }

        .typing {
            color: #ccc;
            font-style: italic;
        }

        .typing::after {
            content: "...";
            animation: dots 1s steps(3, end) infinite;
        }

        @keyframes dots {
            0% { content: "."; }
            33% { content: ".."; }
            66% { content: "..."; }
        }


        .user { color:#60a5fa; }
        .bot { color:#34d399; }
    </style>
</head>

<body>

<div class="chatbox">
    <div class="header">
    <img src="https://cdn-icons-png.flaticon.com/512/4712/4712109.png"
         style="width:40px;vertical-align:middle;margin-right:8px;">
    
    <div style="display:inline-block;vertical-align:middle;">
        <div>IT Helpdesk Chatbot</div>
        <div style="font-size:14px;opacity:0.8;">Pari</div>
    </div>
</div>


    <div class="messages" id="messages"></div>

    <div class="input-box">
        <input id="msg" placeholder="Type issue...">
        <button onclick="send()">Send</button>
    </div>
</div>

<script>
async function send(){
    let input=document.getElementById("msg");
    let msg=input.value;
    if(!msg) return;

    document.getElementById("messages").innerHTML +=
        `<div style="text-align:right;margin:8px;">
         <span style="background:#22c55e;color:white;padding:8px;border-radius:10px;display:inline-block;">
         ${msg}
         </span>
         </div>`;

 
    input.value="";

    let res=await fetch("https://it-helpdesk-genai-chatbot.onrender.com/chat",{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({message:msg})
    });

    document.getElementById("messages").innerHTML +=
    "<div id='typing' class='typing'>Pari is typing...</div>";

    let data = await res.json();

    setTimeout(() => {

        let typing = document.getElementById("typing");
        if (typing) typing.remove();

        document.getElementById("messages").innerHTML +=
        `<div style="text-align:left;margin:8px;">
        <span style="background:#444;color:white;padding:8px;border-radius:10px;display:inline-block;">
        ${data.reply}
        </span>
        </div>`;

        document.getElementById("messages").scrollTop =
        document.getElementById("messages").scrollHeight;

    }, 1200); 


    document.getElementById("messages").scrollTop =
    document.getElementById("messages").scrollHeight;


}
</script>

</body>
</html>
